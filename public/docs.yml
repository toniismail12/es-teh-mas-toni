openapi: 3.0.0
info:
  version: 1.0.0
  title: API SERVICES
  description: API Documentation
  
servers:

  - url: http://10.10.2.189:62799
    description: API PUSRI Dev
  - url: https://gwkong.pusri.co.id/service-iam-dev
    description: API ORG Dev
  - url: http://10.10.2.189:62714
    description: API Send OTP WA
  - url: http://10.10.2.189:62821
    description: API Encrypt Decrypt

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer

  parameters:
    Page:
      name: page
      in: query
      description: "Page number for pagination (default: 1)"
      schema:
        type: integer

    Limit:
      name: limit
      in: query
      description: "Number of items to return per page (default: 10)"
      schema:
        type: integer

    Size:
      name: size
      in: query
      description: "Number of items to return per page"
      schema:
        type: integer

  responses:
    "200":
      description: OK
    "400":
      description: "Bad Request"
    "401":
      description: Unauthorized

security:
  - bearerAuth: []

paths:

  /api/login:
    post:
      tags:
        - auth
      description: This endpoint is used for login and get token, and it is accessible to all roles.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /send-otp:
    post:
      tags:
        - kode otp
      description: This endpoint is used for send kode otp via wa, and it is accessible to all roles.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                badge:
                  type: string
                name:
                  type: string
                phone_number:
                  type: string
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /verify-otp:
    post:
      tags:
        - kode otp
      description: This endpoint is used for verify kode, and it is accessible to all roles.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                kode:
                  type: string
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/encrypt:
    post:
      tags:
        - encrypt - decrypt
      description: This endpoint is used for encrypt text, and it is accessible user role registered.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                text:
                  type: string
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/decrypt:
    post:
      tags:
        - encrypt - decrypt
      description: This endpoint is used for decrypt text, and it is accessible user role registered.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                text:
                  type: string
                key:
                  type: string
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/organization:
    get:
      tags:
        - organizations
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Limit"
        - in: query
          name: text
          schema:
            type: string
        - in: query
          name: code
          schema:
            type: string
        - in: query
          name: org_code
          schema:
            type: string
        - in: query
          name: code_parent
          schema:
            type: string
        - in: query
          name: level
          schema:
            type: string
          description: "1 Direktorat, 2 Kompartemen, 3 Departemen"
        - in: query
          name: status
          schema:
            type: string
          description: "active, in-active"
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/hc/education:
    get:
      tags:
        - hc
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: badge_uid
          schema:
            type: string
        - in: query
          name: badge
          schema:
            type: string
        - in: query
          name: nama
          schema:
            type: string
        - in: query
          name: education_level
          schema:
            type: string
        - in: query
          name: education_description
          schema:
            type: string
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/hc/family:
    get:
      tags:
        - hc
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: badge_uid
          schema:
            type: string
        - in: query
          name: badge
          schema:
            type: string
        - in: query
          name: nama_user
          schema:
            type: string
        - in: query
          name: name
          schema:
            type: string
        - in: query
          name: relasi_description
          schema:
            type: string
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/hc/position:
    get:
      tags:
        - hc
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: position
          schema:
            type: string
        - in: query
          name: pos_title
          schema:
            type: string
        - in: query
          name: manager_pos
          schema:
            type: string
        - in: query
          name: manager_title
          schema:
            type: string
        - in: query
          name: kategori_jabatan
          schema:
            type: string
        - in: query
          name: org_unit
          schema:
            type: string
        - in: query
          name: org_unit_desc
          schema:
            type: string
        - in: query
          name: costcenter
          schema:
            type: string
        - in: query
          name: costcenter_desc
          schema:
            type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/hc/organization-assignment:
    get:
      tags:
        - hc
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - name: posisi
          in: query
          required: false
          description: Position filter
          schema:
            type: string
        - name: nama_posisi
          in: query
          required: false
          description: Name of the position
          schema:
            type: string
        - name: parent_posisi
          in: query
          required: false
          description: Parent position filter
          schema:
            type: string
        - name: parent_posisi_description
          in: query
          required: false
          description: Parent position description
          schema:
            type: string
        - name: jabatan
          in: query
          required: false
          description: Job title filter
          schema:
            type: string
        - name: nama_jabatan
          in: query
          required: false
          description: Name of the job title
          schema:
            type: string
        - name: org_code
          in: query
          required: false
          description: Organization code filter
          schema:
            type: string
        - name: org_description
          in: query
          required: false
          description: Organization description
          schema:
            type: string
        - name: costcenter_code
          in: query
          required: false
          description: Cost center code
          schema:
            type: string
        - name: costcenter_description
          in: query
          required: false
          description: Cost center description
          schema:
            type: string
        - name: golongan
          in: query
          required: false
          description: Golongan (group) filter
          schema:
            type: string
        - name: nama_golongan
          in: query
          required: false
          description: Name of the golongan (group)
          schema:
            type: string
        - name: employee_group
          in: query
          required: false
          description: Employee group filter
          schema:
            type: string
        - name: employee_group_description
          in: query
          required: false
          description: Employee group description
          schema:
            type: string
        - name: area
          in: query
          required: false
          description: Area filter
          schema:
            type: string
        - name: area_description
          in: query
          required: false
          description: Area description
          schema:
            type: string
        - name: sub_area
          in: query
          required: false
          description: Sub area filter
          schema:
            type: string
        - name: sub_area_description
          in: query
          required: false
          description: Sub area description
          schema:
            type: string
        - name: contract_description
          in: query
          required: false
          description: Contract description filter
          schema:
            type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/adm-app/analisa-lab:
    get:
      tags:
        - adm app
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: nomor_sales_order
          schema:
            type: string
        - in: query
          name: delivery_item
          schema:
            type: string
        - in: query
          name: nomor_material
          schema:
            type: string
        - in: query
          name: nomor_do
          schema:
            type: string
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
  
  /api/v1/sap/zmm_r21/purchasing:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: material_no
          schema:
            type: string
        - in: query
          name: no_pr
          schema:
            type: string
        - in: query
          name: line_item_pr
          schema:
            type: string
       
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/sap/iw39/order:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: order_no
          schema:
            type: string
        - in: query
          name: notification_no
          schema:
            type: string
       
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/sap/iw49n/order-list:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: order_no
          schema:
            type: string
        - in: query
          name: notification_no
          schema:
            type: string
        - in: query
          name: operation_activity
          schema:
            type: string
        - in: query
          name: description
          schema:
            type: string
       
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/sap/iw29/notification:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: order_no
          schema:
            type: string
        - in: query
          name: notification_no
          schema:
            type: string
       
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/sap/iw47/confirmation:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: order_no
          schema:
            type: string
        - in: query
          name: notification_no
          schema:
            type: string
       
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/sap/zmm_r15/stock-material:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: order_no
          schema:
            type: string
        - in: query
          name: notification_no
          schema:
            type: string
       
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/v1/sap/zsd-sodo-period-sales-order:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: order_no
          schema:
            type: string
        - in: query
          name: notification_no
          schema:
            type: string
       
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"        

  /api/v1/sap/zsd-sodo-pgi/sales-order:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: nomor_sales_order
          schema:
            type: string
        - in: query
          name: delivery_item
          schema:
            type: string
        - in: query
          name: nomor_material
          schema:
            type: string
        - in: query
          name: nomor_do
          schema:
            type: string
       
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"        

  /api/v1/sap/mb25-reservasi:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: nomor_sales_order
          schema:
            type: string
        - in: query
          name: delivery_item
          schema:
            type: string
        - in: query
          name: nomor_material
          schema:
            type: string
        - in: query
          name: nomor_do
          schema:
            type: string
       
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"      

  /api/v1/sap/plant:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: nomor_sales_order
          schema:
            type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"   

  /api/v1/sap/equipment:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: nomor_sales_order
          schema:
            type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"  

  /api/v1/sap/component-bom:
    get:
      tags:
        - sap
      parameters:
        - $ref: "#/components/parameters/Page"
        - $ref: "#/components/parameters/Size"
        - in: query
          name: nomor_sales_order
          schema:
            type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"        
  
  /api/admin/users:
    get:
      tags:
        - admin users
     
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

    post:
      tags:
        - admin users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
                roleUID:
                  type: string
                domain:
                  type: string
                enforcePasswordExpiration:
                  type: boolean
                expirationDate:
                  type: string
                isDevelopment:
                  type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
    put:
      tags:
        - admin users

      parameters:
        - name: uid
          in: path
          required: true
          description: The unique identifier of the user
          schema:
            type: string

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Name:
                  type: string
                Permission:
                  type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
    
    delete:
      tags:
        - admin users

      parameters:
        - name: uid
          in: path
          required: true
          description: The unique identifier of the user
          schema:
            type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
  
  /api/admin/role:
    get:
      tags:
        - admin role
     
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

    post:
      tags:
        - admin role
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Name:
                  type: string
                Permissions:
                  type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
    put:
      tags:
        - admin role

      parameters:
        - name: uid
          in: path
          required: true
          description: The unique identifier
          schema:
            type: string

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Name:
                  type: string
                Permission:
                  type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
    
    delete:
      tags:
        - admin role

      parameters:
        - name: uid
          in: path
          required: true
          description: The unique identifier
          schema:
            type: string
            
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

  /api/admin/permissions:
    get:
      tags:
        - admin permissions
     
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"

    post:
      tags:
        - admin permissions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                path:
                  type: string
                method:
                  type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
    put:
      tags:
        - admin permissions

      parameters:
        - name: uid
          in: path
          required: true
          description: The unique identifier
          schema:
            type: string

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                path:
                  type: string
                method:
                  type: string

      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
    
    delete:
      tags:
        - admin permissions

      parameters:
        - name: uid
          in: path
          required: true
          description: The unique identifier
          schema:
            type: string
            
      responses:
        "200":
          $ref: "#/components/responses/200"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"